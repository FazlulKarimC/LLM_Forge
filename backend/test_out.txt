============================= test session starts =============================
platform win32 -- Python 3.12.3, pytest-9.0.2, pluggy-1.6.0 -- C:\Users\FAZLUL\Desktop\MainProject\LlmForge\backend\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Users\FAZLUL\Desktop\MainProject\LlmForge\backend
configfile: pytest.ini
plugins: anyio-4.12.0
collecting ... collected 1 item

tests/test_api.py::TestExperimentCoreEndpoints::test_custom_422_validation_error FAILED [100%]

================================== FAILURES ===================================
________ TestExperimentCoreEndpoints.test_custom_422_validation_error _________

self = <tests.test_api.TestExperimentCoreEndpoints object at 0x0000026EFF4C9520>
client = <starlette.testclient.TestClient object at 0x0000026EFF4CA2A0>

    def test_custom_422_validation_error(self, client):
        """
        Verify our global `validation_exception_handler` intercepts
        Pydantic errors and formats them securely with `request_id`.
        """
        # POST an incomplete payload to trigger 422
        bad_payload = {"name": "Test Env"}
        response = client.post(f"{settings.API_V1_PREFIX}/experiments/", json=bad_payload)
    
>       assert response.status_code == 422
E       assert 404 == 422
E        +  where 404 = <Response [404 Not Found]>.status_code

tests\test_api.py:55: AssertionError
============================== warnings summary ===============================
app\schemas\result.py:47
  C:\Users\FAZLUL\Desktop\MainProject\LlmForge\backend\app\schemas\result.py:47: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class RunSummary(BaseModel):

app\schemas\result.py:71
  C:\Users\FAZLUL\Desktop\MainProject\LlmForge\backend\app\schemas\result.py:71: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ResultResponse(BaseModel):

app\schemas\run.py:37
  C:\Users\FAZLUL\Desktop\MainProject\LlmForge\backend\app\schemas\run.py:37: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class RunResponse(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/test_api.py::TestExperimentCoreEndpoints::test_custom_422_validation_error
======================== 1 failed, 3 warnings in 0.97s ========================
